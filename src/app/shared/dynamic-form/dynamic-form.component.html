<app-alert
  *ngIf="alert"
  [alert]="alert"
  (dismissed)="onDismissAlert()"></app-alert>

<form [formGroup]="form"
  (ngSubmit)="onSubmit()">

  <ng-container
    *ngFor="let ctrl of controls"
    [ngSwitch]="ctrl.controlType">

    <ng-container
      *ngSwitchCase="'group'">
      <fieldset>
        <legend>{{ctrl.label}}</legend>
        <div class="form-row"
          [formGroupName]="ctrl.key">

          <div class="form-group col-12 col-sm-6"
            *ngFor="let subCtrl of ctrl.groupedControls">

            <label
              class="form-label"
              [attr.for]="subCtrl.key">
              {{subCtrl.label}}
            </label>

            <input
              class="form-control"
              [id]="subCtrl.key"
              [type]="subCtrl.type"
              [placeholder]="subCtrl.placeholder"
              [formControlName]="subCtrl.key"
              [readonly]="subCtrl.readonly"/>

          </div>
        </div>
      </fieldset>
    </ng-container>

    <app-dynamic-control
      *ngSwitchDefault
      [control]="ctrl"
      [form]="form"></app-dynamic-control>

  </ng-container>


  <app-progress-btn
    [button]="button"
    [disabled]="!form.valid"></app-progress-btn>
</form>
