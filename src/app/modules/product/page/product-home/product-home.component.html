<div class="row justify-content-center">
  <div class="col-md-12 col-lg-8">
    <div class="d-flex justify-content-between">
      <h2 class="mb-3">Products</h2>
      <a class="btn btn-primary align-self-center"
        routerLink="new">New</a>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th class="text-right">Updated</th>
          <th class="text-right">On Paywall</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td class="align-top w-auto">
            <a [routerLink]="product.id">
              {{product.heading}}
            </a>
            <div *ngIf="product.plans.length === 1; else planCount">
              <app-plan-price
                [plan]="product.plans[0]"></app-plan-price>
            </div>
            <ng-template #planCount>
              <div>
                {{product.plans.length}} pricing plans
              </div>
            </ng-template>
          </td>
          <td class="align-middle text-right">
            {{product.updatedUtc}}
          </td>
          <td class="align-middle text-right">
            <ng-container *ngIf="product.plans.length > 0">
              <svg *ngIf="product.isActive; else activate"
                width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
              </svg>
              <ng-template #activate>
                <button class="btn btn-link"
                  [disabled]="progress.on"
                  (click)="useProduct(product.id)">
                  Use it
                </button>
              </ng-template>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>

    <p>Usually you won't need to touch the <span class="baddge badge-info pl-3 pr-3">New</span> button since the products are already pre-defined. To make modifications, go to each product's detail page. You can change a product's descriptive text, its active pricing plans and each plan's discount offer.</p>

    <p>To use a product on paywall, this product must have <strong>active</strong> plans set. It is not enough for a product to have a plan. It must be activted. By active we mean the plan will be visible on paywall once the product is set on paywall. By default a new plan of a product is not activated.</p>
  </div>
</div>
